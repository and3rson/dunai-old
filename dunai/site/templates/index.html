{% load static %}
{% load common %}

<!DOCTYPE html>
<html>
    <head>
        <title>Andrew Dunai</title>
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400&amp;subset=cyrillic" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css" />
        <link rel="stylesheet" type="text/css" href="{% static 'css/normalize.css' %}" />
        <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}?7" />
        <link rel="stylesheet" type="text/css" href="{% static 'css/devicons.min.css' %}" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <div class="splash" data-on-scroll="splash">
            <div class="container">
                <div>
                    <h1 class="a">Andrew</h1>
                    <h1 class="b">Dunai</h1>
                    <h2 class="sub">I make things work.</h2>
                </div>
            </div>
        </div>
        <div class="companies" data-on-scroll="companies">
            <div class="container">
                {% for company in cv.companies %}
                <h2>
                    <span class="company-role">{{ company.role }}</span> <span class="company-name"><span class="hide-on-sm">@</span> {{ company.name }}</span>
                    <span class="company-date">{{ company.start|date:"b Y" }} - {% if company.end %}{{ company.end|date:"b Y" }}{% else %}now{% endif %}</span>
                </h2>
                <p class="company-descr">{{ company.description }}</p>
                <div class="company-technologies">
                    {% for technology in company.technologies %}
                        <span class="technology">
                            {{ technology|icon }}
                        </span>
                    {% endfor %}
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="container">
            <div class="row">
                {% for feature in features %}
                    <div class="col">
                        <a href="#" class="feature" data-image-url="{{ feature.photo.url }}">
                            <div class="cover" style="background-image: url({{ feature.photo.url }})"></div>
                            <div class="note">{{ feature.comment|safe }}</div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="container" --data-on-scroll="contacts">
            <div class="contacts">
                <div class="contact">
                    My LinkedIn: <a href="https://www.linkedin.com/in/dunai/">linkedin.com/in/dunai/</a>
                </div>
                <div class="contact">
                    My Email: <a href="mailto:a@dun.ai">a@dun.ai</a>
                </div>
                <div class="contact">
                    My Phone: <a href="tel:+380633700097">+380633700097</a>
                </div>
            </div>
        </div>
    <div class="popup">
        <div class="popup-content">
        </div>
    </div>
    <script type="text/javascript">
        var popup = document.querySelector('.popup');
        var popupContent = document.querySelector('.popup .popup-content');
        Array.prototype.slice.call(document.querySelectorAll('.feature')).forEach(function(el) {
            el.addEventListener('click', function(e) {
                var url = this.getAttribute('data-image-url');
                e.preventDefault();
                popup.setAttribute('class', 'popup visible');
                popupContent.style.backgroundImage = 'url(' + url + ')';
            });
        });
        var hidePopup = function() {
            popup.setAttribute('class', 'popup');
        };
        popup.addEventListener('click', hidePopup);
        window.addEventListener('keydown', function(e) {
            if (e.keyCode == 27 || e.which == 27) {
                hidePopup();
            }
        });
    </script>
    </body>
</html>

